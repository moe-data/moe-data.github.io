<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta name="keywords" content="萌萌数据库,装备开发统计,舰队collection,舰船建造统计,舰娘数据库" />
<meta name="description" content="本站支持多装备概率叠加显示，特定旗舰出货概率显示" />
<meta content="yes" name="apple-mobile-web-app-capable" /><!--iphone设备中的safari私有meta标签，它表示：允许全屏模式浏览-->
<meta content="black" name="apple-mobile-web-app-status-bar-style" /><!--iphone的私有标签，它指定的iphone中safari顶端的状态条的样式-->
<meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="icon" href="https://img.pddpic.com/mms-material-img/2021-01-16/e555cb1c-1339-48b5-9930-4101be911797.png">
    <title>萌萌数据库 - 舰船数据</title>
    <!-- Bootstrap core CSS -->
    <!-- <link href="http://cdn.bootcss.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet"> -->
    <link href="https://cdn.bootcdn.net/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" rel="stylesheet">
    <!-- <link href="https://cdn.bootcss.com/bootstrap-table/1.18.0/bootstrap-table.min.css" rel="stylesheet"> -->
    <link href="https://cdn.bootcdn.net/ajax/libs/bootstrap-table/1.18.0/bootstrap-table.min.css" rel="stylesheet">
    <link rel="stylesheet" href="../dist/css/dashboard.css">
    <link rel="stylesheet" href="../dist/css/selection.css">
    <style id='csscontainer'></style>
    <style>
        /* .fix-sticky {padding-top: 40px;        position: fixed !important;        overflow: hidden;        z-index: 100;} */
        /* .sticky-header-container {margin-top: 40px;} */
        .fix-sticky table thead {background: #fff;}
        table tbody tr td{ white-space: nowrap !important; }
        /* .table thead th .th-inner { white-space: normal !important; } */
    </style>
  <!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-SQLQ5EBLTM"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-SQLQ5EBLTM');
</script>
</head>

  <body>
    <div id="nav"></div>
    <div id="bgpic"><div id="bgcolor">
    <div class="container-fluid">
      <div class="row">
        <div class="main">
          <h1 class="page-header" align="center">舰船数值</h1><div class="table-responsive">
            <div class="bootstrap-table">
             
            <div id="toolbar" class="form-inline">
                <input id="page" class="form-control" style="width: 60px" type="number" value="1" min="1">
                <button id="jump" class="btn btn-secondary">跳页</button>
                <select class="form-control" id="locale">
                    <option value="zh-CN" selected="selected">Language</option>
                    <option value="en-US">English</option>
                    <option value="zh-CN">简体中文</option>
                    <option value="zh-TW">繁體中文</option>
                    <option value="ja-JP">日本語</option>
                    <option value="ko-KR">한국어</option>
                    <option value="ru-RU">Русский</option>
                    <option value="fr-FR">Français</option>
                    <option value="de-DE">Deutsch</option>
                  <option value="af-ZA">af-ZA</option>
                  <option value="ar-SA">ar-SA</option>
                  <option value="ca-ES">ca-ES</option>
                  <option value="cs-CZ">cs-CZ</option>
                  <option value="el-GR">el-GR</option>
                  <option value="es-AR">es-AR</option>
                  <option value="es-CL">es-CL</option>
                  <option value="es-CR">es-CR</option>
                  <option value="es-ES">es-ES</option>
                  <option value="es-MX">es-MX</option>
                  <option value="es-NI">es-NI</option>
                  <option value="es-SP">es-SP</option>
                  <option value="et-EE">et-EE</option>
                  <option value="eu-EU">eu-EU</option>
                  <option value="fa-IR">fa-IR</option>
                  <option value="fi-FI">fi-FI</option>
                  <option value="fr-BE">fr-BE</option>
                  <option value="he-IL">he-IL</option>
                  <option value="hr-HR">hr-HR</option>
                  <option value="hu-HU">hu-HU</option>
                  <option value="id-ID">id-ID</option>
                  <option value="it-IT">it-IT</option>
                  <option value="ka-GE">ka-GE</option>
                  <option value="ms-MY">ms-MY</option>
                  <option value="nb-NO">nb-NO</option>
                  <option value="nl-NL">nl-NL</option>
                  <option value="pl-PL">pl-PL</option>
                  <option value="pt-BR">pt-BR</option>
                  <option value="pt-PT">pt-PT</option>
                  <option value="ro-RO">ro-RO</option>
                  <option value="sk-SK">sk-SK</option>
                  <option value="sv-SE">sv-SE</option>
                  <option value="th-TH">th-TH</option>
                  <option value="tr-TR">tr-TR</option>
                  <option value="uk-UA">uk-UA</option>
                  <option value="ur-PK">ur-PK</option>
                  <option value="uz-Latn-UZ">uz-Latn</option>
                  <option value="vi-VN">vi-VN</option>
                </select>
                <div class="loading" style="text-align: center;">
                    <svg viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
                   <circle cx="50" cy="50" r="45"></circle>
                  </svg>
                </div>
            </div>
            <span>
            <table id="mytab" 
            data-toolbar="#toolbar"
            data-search="true" 
            data-filterable='true' 
            data-filter-control="true" 
            data-width="1000px"
            data-sortable="true" 
            data-show-columns="true"
            data-show-export="false"
            data-show-fullscreen="true"
            data-show-pagination-switch="true"
            data-unique-id="uid"
            class="table table-hover"
            >
                               <tr> <th class="center">少女祈祷中。。。</th> </tr>
            </table></span>
            
        </div>
    
    <h1 class="page-header" align="center">数据可视化</h1>
    <div class="table-responsive"> 
  <div class="show text-nowrap" id="show"></div>  
<div class="cstype"></div><div class="cfinal"></div>   <button id='selectAll'>全选</button> <button id='ReverseSelect'>反选</button>
排序：<select title="可在表格中对内容进行排序" id="sort">
    <option value='sum' selected>属性值</option>
    <option value="stype">类型</option>
    <option value="final_form">最终形态</option>
    <option value="houg">火力</option>
    <option value="raig">雷装</option>
    <option value="HP">HP</option>
    <option value="souk">装甲</option>
    <option value="evasion">回避</option>
    <option value="tyku">对空</option>
    <option value="anti_submarine">对潜</option>
    <option value="sight">索敌</option>
    <option value="luck">运</option>
    <option value="id">ID</option>
    <option value='unsort' >表格顺序</option>
</select>
<input type="checkbox" checked='checked' id="desc">降序排列
<select name="" id="stack">
    <option value=0 selected>默认</option>
    <option value=1>堆叠</option>
    <option value=2>分散</option>
</select>
<select name="" id="shape">
    <option value="bar" selected>柱状图</option>
    <option value="line">折线图</option>
</select>
<button id="button2" title="可在表格中对内容进行排序" classs="btn btn-secondary">选中数据生成图表</button><span id="inform"></span></div></div>
<div id="container"></div><!--row-->
</div>

<div id="foot"></div></div></div></div></div><!--container-fluid-->
<i id="js"></i>
<script src="https://cdn.bootcdn.net/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<!-- <script>window.jQuery || document.write('<script src="https://cdn.bootcdn.net/ajax/libs/jquery/3.5.1/jquery.min.js"><\/script>')</script> -->
<script>
    $("#nav").load("nav.html");
    $("#foot").load("../foot.html");
</script>
<!-- <script src="http://cdn.bootcss.com/bootstrap/3.3.7/js/bootstrap.min.js"></script> -->
<script type="text/javascript" src= "../dist/js/jgs.js"> </script>  
<script type="text/javascript" src= "../dist/js/simplize.js"> </script>  
<script type="text/javascript" src= "../dist/js/share.js"> </script>  
<script type="text/javascript" src= "../dist/js/table.js"> </script>  
<script type="text/javascript" src= "../dist/js/line.js"> </script>  
<script src="https://cdn.bootcdn.net/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js"></script>
<!-- <script src="https://cdn.bootcss.com/bootstrap-table/1.18.0/bootstrap-table.min.js"></script> -->
<script src="https://cdn.bootcdn.net/ajax/libs/bootstrap-table/1.18.0/bootstrap-table.min.js"></script>
<!-- <script src="../dist/js/tableExport.min.js"></script> -->
<!-- <script src="https://unpkg.com/tableexport.jquery.plugin/tableExport.min.js"></script> -->
<!-- <script src="https://cdn.bootcdn.net/ajax/libs/bootstrap-table/1.18.0/extensions/export/bootstrap-table-export.min.js"></script> -->
<!-- <script src="https://cdn.bootcdn.net/ajax/libs/bootstrap-table/1.18.0/bootstrap-table-locale-all.js"></script> -->
<script src="https://cdn.bootcdn.net/ajax/libs/bootstrap-table/1.18.0/locale/bootstrap-table-zh-CN.min.js"></script>
<script src="https://cdn.bootcdn.net/ajax/libs/bootstrap-table/1.18.0/extensions/filter-control/bootstrap-table-filter-control.js"></script>
<script src="https://cdn.bootcdn.net/ajax/libs/bootstrap-table/1.18.0/extensions/sticky-header/bootstrap-table-sticky-header.min.js"></script>
<!-- <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/echarts/dist/echarts.min.js"></script> -->
<script type="text/javascript">
</script>
<script>    //language
var mst_ship
var kj=false
var ship
let attr
var detect=(navigator.browserLanguage || navigator.language)
if(!havelang){
    if (detect.length>0){console.log(detect);}else{detect="zh-CN"}
    if(detect.slice(0,2)=='zh'||detect.slice(0,2)=='ja'){
        kj=true
    }
    selectlang=document.getElementById("locale")
    for(let i=0;i<selectlang.length;i++){
    if(selectlang[i].value==detect)
    selectlang[i].selected = true;
    }}
$(document).ready(function() {
    $.getJSON("../parsed/ship.json",function(api_mst_ship){
        attr=api_mst_ship
    }).done(function() {
    langchange()
    $('#locale').change(function(){
        langchange();setlang();});
    setTimeout(function(){
    js("https://cdn.bootcdn.net/ajax/libs/bootstrap-table/1.18.0/bootstrap-table-locale-all.js")
    js("https://cdn.jsdelivr.net/npm/echarts/dist/echarts.min.js")
    if(!havelang){
    document.getElementById("locale")[0].selected = true;}
    $('.loading').hide();
    },   500);
    setTimeout(function(){
    // $("#foot").load("foot.html");
    $('.search-input').bind("input onchange", function() {
        setTimeout(function(){
            for(let i=0;i<document.getElementsByClassName('search-input').length;i++){
        //console.log(document.getElementsByClassName('search-input')[i])
            document.getElementsByClassName('search-input')[i].value=Japanized(document.getElementsByClassName('search-input')[i].value);}
            },     50);
         });
    loadchart();
    },   1200);
    })
});
function langchange(){
    initTable(locallang());
}
function thead(eg) {
var col=[]
for(e in eg){
    var filterControl="input"
    var formatter=undefined
    var cellStyle=undefined
    var strict=true
    // var escapes=false
    var visible=(title[e]==undefined?false:true)
    var cwidth=""
    if(e=='name'){
        strict=false
        formatter=formatname;}
    if(e=='buildtime'){
        formatter=formatTime;}
    if(e=='final_form'){
        formatter=formatLv;}
    if(e=='soku'){
        formatter=formatSoku;}
    if(e=='aftershipid'){
        formatter=formatAfter;}
    if(e=='getmes'){
        strict=false
        formatter=paramsMatter;
        // escapes=true;
        // width=120
        cellStyle=formatTableUnit
        }else{
    if(e=='stype'){
        formatter=formatStype;}
        }
    if(e=='stype'||e=='afterlv'||e=='final_form'||e=='soku'||e=='backs'||e=='slot_num'||e=='leng'){
        filterControl="select";}
    if(e=='ctype'||e=='getmes'||e=='aftershipid'||e=='broken'||e=='backs'||e=='slot_num'||e=='powup'||e=='taik'||e=='afterfuel'||e=='afterbull'){
        visible=false;}
    var temp=getname(e,kj)
    var temp=(Width()<1080)?(temp):temp
    col.push({
            title: temp,
            field: e,
            sortable: true,
            filterControl:filterControl,
            formatter:formatter,
            cellStyle:cellStyle,
            filterStrictSearch:strict ,
            // escape:escapes,
            visible: visible,
            width:cwidth,
        }
    )
}   
return col;
}
function initTable(lval){
    if(lval){ kj=(lval.slice(0,2)=='zh'||lval.slice(0,2)=='ja')}else{console.log(lval)};
    $.getJSON("../parsed/api_mst_ship.json",function(api_mst_ship){
        let result=[]
        api_mst_ship.forEach(function(e){
            let id=e.api_id
            if(id<1501)
            result.push({
            "id":e.api_id,
            "name":e.api_name,
            "stype":e.api_stype,
            "buildtime":e.api_buildtime,
            "afterlv":e.api_afterlv,
            "afterbull":e.api_afterbull,
            "afterfuel":e.api_afterfuel,
            "aftershipid":e.api_aftershipid,
            "backs":e.api_backs,
            "broken":e.api_broken,
            "bull_max":e.api_bull_max,
            "ctype":e.api_ctype,
            "fuel_max":e.api_fuel_max,
            "getmes":e.api_getmes,
            "houg":e.api_houg,
            "leng":e.api_leng,
            "luck":e.api_luck,
            "maxeq":e.api_maxeq,
            "powup":e.api_powup,
            "raig":e.api_raig,
            "slot_num":e.api_slot_num,
            "soku":e.api_soku,
            "sort_id":e.api_sort_id,
            "sortno":e.api_sortno,
            "souk":e.api_souk,
            "taik":e.api_taik,
            "tyku":e.api_tyku,
            "final_form":at(id,"final_form"),
            "anti_submarine":at(id,"anti_submarine"),
            "total_eq":e.api_maxeq[0]+e.api_maxeq[1]+e.api_maxeq[2]+e.api_maxeq[3]+e.api_maxeq[4],
            "evasion":at(id,"evasion"),
            "sight":at(id,"sight"),
            "yomi":e.api_yomi
            })
            if(id<11)
        z(at(id,"final_form"))
        });
    addcol(result,"HP","taik",0)
    mst_ship=result;
    loadprot(result[0]);
    $('#mytab').bootstrapTable('destroy').bootstrapTable({
        method: 'get',
        // url: "../parsed/ship.json",
        data:mst_ship,
        sortReset: true,
        striped: true, // 是否显示行间隔色
        pageNumber: 1, // 初始化加载第一页
        pagination: true, // 是否分页
        sidePagination: 'client', // server:服务器端分页|client：前端分页
        pageSize: 20, // 单页记录数
        pageList: [10, 50, 100, 500],
        stickyHeader: true,
        stickyHeaderOffsetLeft: em,
        stickyHeaderOffsetRight: em,
        locale: lval,
        columns: thead(result[0])
        // showRefresh : true,// 刷新按钮
        // queryParams: function(params) { // 上传服务器的参数
        //     var temp = {
        //         name: $("#sname").val(),
        //         viewReason: $("#viewReason").val(),
        //     };
        //     return temp;
        // },
    })
    // if(Width()<900&&kj){$('.table .th-inner').css('writing-mode','vertical-lr');}
    var padding='4'
    if(Width()<1200){padding=kj?'':'2';
        $('.table .th-inner').css( 'white-space','normal')}
    document.getElementById("csscontainer").innerHTML=(".fix-sticky {padding-top:"+padding+"0px;position: fixed !important;overflow: hidden;  z-index: 100;}")
    $('.loading').hide();
    });}
  </script>
  <script>
// $('#mytab').find('th').attr("data-sortable","true");
// $('#mytab').find('.th-inner').attr("class","sortable both");
function formatAfter(value){
var str='';
if(value==0){
    str=kj?'改造不可':'unable';
    return str
}else{
for(let i=0,l=mst_ship.length;i<l;i++){
    if(value==mst_ship[i]['id']){
        str=mst_ship[i]['name']
    }
}}
return str;
}
function formatLv(value){
    return kj?(value=='no'?'否':'是'):value
}
function formatSoku(value, row, index) {
    return value == 10 ? (kj?"高速":'high speed') : (value == 5 ? kj?"低速":'low speed':"陸上型");
}
function formatRange(value, row, index) {
    var str;
    switch(value) {
        case 1:
            str = "短";
            break;
        case 2:
            str = "中";
            break;
        case 3:
            str = "長";
            break;
        default:
            str = "超長";}
    return str;
}

function at(id,att) {
    for(let i=0;i<attr.length;i++){
        let e=attr[i]
        if(e.id==id){
            return e[att]
        }}
    }
  </script>
  </body>
</html>