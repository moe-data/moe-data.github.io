<!DOCTYPE html>
<html lang="zh-CN">

<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="keywords" content="萌萌数据库,装备开发统计,舰队collection" />
  <meta name="description" content="本站支持多装备概率叠加显示，特定旗舰出货概率显示" />
  <meta name="author" content="提督Conba">
  <link rel="icon" href="images/logo/icon.png">
  <title>萌萌数据库- 装备开发统计</title>
  <link href="https://cdn.bootcdn.net/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdn.bootcdn.net/ajax/libs/bootstrap-table/1.18.0/bootstrap-table.min.css" rel="stylesheet">
  <link rel="stylesheet" href="dist/css/dashboard.css">
  <!-- <link rel="stylesheet" href="dist/css/selection.css"> -->
  <style>
    #bgcolor {
      margin-right: 15px;
      margin-left: 15px;
    }
    h3 {display : inline!important}
    .off{    background-color: #eee;color: #000;}
    /* div.hint {line-height:99%} */
    .btnlg{width: 300px;height: 70px;font-size: large;font-weight: bold}
    button.clicked.btn-default{color:darkblue;}
  </style>
</head>

<body>
  <div id="nav"></div>
  <h1 align="center">萌萌数据库</h1>
  <div id="bgpic">
    <div id="bgcolor">
      <div class="panel panel-default">

        <div class="panel panel-info col-sm-12">
          <div class="panel-heading">
            <h3 class="panel-title">開発対象装備&ensp;&ensp;
              <select name="" id="sort">
              <option value="itype" selected>类型排序</option>
              <option value="rare">稀有排序</option>
              <option value=0>开发解禁时间排序</option>
          </select></h3>
          </div>
          <div class="panel-body">
            <dl class="dl-horizontal item-list">
              <div class="show" id="show"></div>
            </dl>
          </div>
        </div>
        <div align="center" class="panel-body  col-sm-12">

          <button type="button" class="btn btnlg btn-success go">检索</button>
        </div>
        <div class="panel panel-success  text-nowrap col-sm-6">
          <div class="panel-heading">
            <h3 class="panel-title">时间范围</h3>
          </div>
          <div class="panel-body"  align="center">
            <table cellpadding="50"><tr><th>时间</th><th>累计开发次数</th><th>&ensp;&ensp;&ensp;文件大小</th></tr>
            <tr><td><input class="time" type="checkbox" value="1" id="1">
            <label for ="1">2019年5月或更早</td><td align="right">16,256,435</td><td align="right"> 24 MB</label></td> </tr> 
            <tr><td><input class="time" type="checkbox" value="2" id="2">
            <label for ="2">2019年6月~2020年3月</td><td align="right">68718791</td><td align="right"> 11484KB</label></td> </tr> 
            <tr><td><input class="time" type="checkbox" value="3" id="3">
            <label for ="3">2020年4月~8月</td><td align="right">35462754</td><td align="right"> 11484KB</label></td> </tr> 
            <tr><td><input class="time" type="checkbox" value="8"  id="8" checked="checked">
            <label for ="8">2020年9月~10月</td><td align="right">1,214,965</td><td align="right"> 4.4 MB</label></td> </tr> 
          </table>
          </div>
        </div>
        <div class="panel panel-warning col-sm-6 text-nowrap hint">
        <div class="panel-heading">
              <h3 class="panel-title ">提示</h3>
            </div><br><table  align="center">
            <tr><td><h3><span class="label label-primary">主查询</span></h3><span>&ensp;&ensp;目标出货率必须>0，计入总确率（点击一次）</span> <br> <br>
            <tr><td><h3><span class="label label-info">副查询</span></h3><span>&ensp;&ensp;目标出货率允许=0，计入总确率（点击两次）</span> <br> <br>
           <tr><td><h3><span class="label label-default off">不查询</span></h3><span>&ensp;&ensp;目标不计入总确率（不点击或点击三次）</span>  <br> <br>
          </table>
        </div>
        

      </div>
      <div class=" col-sm-12">
        <h2 align="center"> <a href="zh/5200.html">Ark Royal [4000,2000,5000,5200,20]</a> </h2>
        <h2 align="center"> <a href="zh/7000.html">Ark Royal [4000,2000,5000,7000,20]</a> </h2>
      </div>

      <div id="foot"></div>
    </div>
  </div>
  <i id="js"></i>
  <script src="https://cdn.bootcdn.net/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <!-- <script>window.jQuery || document.write('<script src="https://cdn.bootcdn.net/ajax/libs/jquery/3.5.1/jquery.min.js"><\/script>')</script> -->
  <script>
    $("#nav").load("nav.html");
  </script>
  <!-- <script src="http://cdn.bootcss.com/bootstrap/3.3.7/js/bootstrap.min.js"></script> -->
  <script type="text/javascript" src="dist/js/jgs.js"> </script>
  <script type="text/javascript" src="dist/js/simplize.js"> </script>
  <script type="text/javascript" src="dist/js/share.js"> </script>
  <script type="text/javascript" src="dist/js/table.js"> </script>
  <script type="text/javascript" src="dist/js/line.js"> </script>
  <script src="https://cdn.bootcdn.net/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js"></script>
  <script type="text/javascript">
    var slotitem
    var primary = 'btn-primary'
    var warning = 'btn-info'
    var btndef='btn-default'
    $.getJSON("parsed/api_mst_slotitem.json", function (result) {
      addcol(result,"itype","type",2)
      slotitem = result;
    }).done(function () {
      var years = ["2020", "2018", "2014"];
      var months = {
        "2014": ["1", "2", "3", "4", "5", "6", "7", "8", "9", "10", "11", "12", "13", "14", "15", "16", "17", "18", "19", "20", "21", "22", "23", "24", "25", "26", "27", "28", "29", "30", "31", "32", "33", "34", "35", "36", "37", "38", "39", "40", "41", "44", "45", "46", "47", "49", "52", "54", "55", "57", "59", "60", "61", "65", "66", "72", "73", "75", "163", "168", "181"],
        "2018": ["51", "90", "120", "207", "226"],
        "2020": ["194", "242", "249", "250"],
      };
      var yearMonth = [years, months];
      genCheck(yearMonth);
      $('.btn').click(function () {
          $(this).addClass('clicked')
        if ($(this).hasClass(primary)) {
          $(this).removeClass(btndef)
          $(this).addClass(warning)
          $(this).removeClass(primary)
        } else {if ($(this).hasClass(warning)) {
          $(this).addClass(btndef)
          $(this).removeClass(warning)
        } else {
          $(this).removeClass(btndef)
          $(this).addClass(primary)
        }
        }
      })
    }).fail(function (d) {
        alert("文件  " + "parsed/api_mst_slotitem.json" + " 读取失败"+d);
    })

    $('.go').click(function () {
      var output=[]
      var extra = []
      var duration=[]
      $('button.btn-primary').each(function(){
        output.push($(this).val());
        });
      $('button.btn-info').each(function(){
        extra.push($(this).val());
        });
      $("input.time").each(function () {
        if ($(this).prop("checked")) {
          duration.push($(this).val());
        }
      });
      console.log(extra,output)
      window.location.href=("result.html?t="+duration.reverse()+'&q='+'d'+'&o='+output+'&e='+extra )
    })
  </script>
  <script type="text/javascript">

    function genCheck(yearMonth) {
      var content = "content";
      var checkText = "checkbox";
      var link = "link";
      var size;

      $("#show").html("");

      var years = yearMonth[0];
      size = years.length;
      for (var i = 0; i < years.length; i++) {
        genShowContent("show", checkText + i, i, years[i] + "年", content + i);
      }
      var monthObj = yearMonth[1];

      for (var i = 0; i < years.length; i++) {
        var array = monthObj["" + years[i] + ""];
        for (var j = 0; j < array.length; j++) {
          genCheckBox(content + i, link + i, array[j], formatItemId(array[j]) + " &ensp; ", i, false);
        }

        // var flag = isAllCheck(link + i);
        var box = document.getElementById(checkText + i);
        // if (flag) {
        //   box.checked = true;
        // } else {
        //   box.checked = false;
        // }
        // $("input[name=" + link + i + "]").each(function () {
        //   $(this).unbind();
        //   $(this).change(function () {
        //     var flag = isAllCheck($(this).attr("name"));
        //     var box = document.getElementById(checkText + $(this).attr("parentIndex"));
        //     if (flag) {
        //       box.checked = true;
        //     } else {
        //       box.checked = false;
        //     }
        //   });
        // });
      }
      // for (var i = 0; i < size; i++) {
      //   $("#" + checkText + i).unbind();
      //   $("#" + checkText + i).change(function () {
      //     var temp = link + $(this).attr("index");
      //     var p = document.getElementById(checkText + $(this).attr("index"));
      //     var box = document.getElementsByName(temp);
      //     for (var j = 0; j < box.length; j++) {
      //       if (p.checked) {
      //         box[j].checked = true;
      //       } else {
      //         box[j].checked = false;
      //       }
      //     }
      //   });
      // }
    }


    function genCheckBox(id, name, value, showText, parentIndex, isCheck) {
      var checkbox = "<span class='la'><button class='btn btn-default' parentIndex=" + parentIndex + " name=".concat(name).concat((isCheck ? " checked='checked'" : '') + " value=").concat(value).concat(" alt=").concat(showText).concat(" >").concat(showText).concat("</button></span>");
      $("#" + id).append(checkbox);

    }


    function genShowContent(id, checkboxId, index, showText, idName) {
      var showContent = "<dd class='msg'><dt><span class='bigfont'>".concat(showText).concat("： </span>" +
        // "<input type='checkbox' index="+index+" id='"+checkboxId+
        // "'/><span>全选</span>"+
        "</dt> <dd class='content' id='").concat(idName).concat("' ></dd></dd><br>");
      $("#" + id).append(showContent);
    }


    function isAllCheck(name) {
      var box = document.getElementsByName(name);
      for (var j = 0; j < box.length; j++) {
        if (!box[j].checked) {
          return false;
        }
      }
      return true;
    }  
  </script>
</body>

</html>